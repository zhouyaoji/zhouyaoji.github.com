<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>mojito_src&#x2F;source&#x2F;lib&#x2F;app&#x2F;addons&#x2F;ac&#x2F;i13n.common.js - Mojito API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="assets&#x2F;img&#x2F;mojito-logo-white-bkg.png" title="Mojito API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.29</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/ActionContext.html">ActionContext</a></li>
            
                <li><a href="..&#x2F;classes/Analytics.common.html">Analytics.common</a></li>
            
                <li><a href="..&#x2F;classes/Assets.common.html">Assets.common</a></li>
            
                <li><a href="..&#x2F;classes/Carrier.common.html">Carrier.common</a></li>
            
                <li><a href="..&#x2F;classes/Composite.common.html">Composite.common</a></li>
            
                <li><a href="..&#x2F;classes/Config.common.html">Config.common</a></li>
            
                <li><a href="..&#x2F;classes/Cookie.client.html">Cookie.client</a></li>
            
                <li><a href="..&#x2F;classes/Cookie.server.html">Cookie.server</a></li>
            
                <li><a href="..&#x2F;classes/Deploy.server.html">Deploy.server</a></li>
            
                <li><a href="..&#x2F;classes/Device.common.html">Device.common</a></li>
            
                <li><a href="..&#x2F;classes/Http.server.html">Http.server</a></li>
            
                <li><a href="..&#x2F;classes/I13n.server.html">I13n.server</a></li>
            
                <li><a href="..&#x2F;classes/Intl.common.html">Intl.common</a></li>
            
                <li><a href="..&#x2F;classes/Meta.common.html">Meta.common</a></li>
            
                <li><a href="..&#x2F;classes/MojitoDispatcher.html">MojitoDispatcher</a></li>
            
                <li><a href="..&#x2F;classes/MojitoServer.html">MojitoServer</a></li>
            
                <li><a href="..&#x2F;classes/MojitProxy.html">MojitProxy</a></li>
            
                <li><a href="..&#x2F;classes/OutputAdapter.common.html">OutputAdapter.common</a></li>
            
                <li><a href="..&#x2F;classes/OutputHandler.html">OutputHandler</a></li>
            
                <li><a href="..&#x2F;classes/Params.common.html">Params.common</a></li>
            
                <li><a href="..&#x2F;classes/Partial.common.html">Partial.common</a></li>
            
                <li><a href="..&#x2F;classes/ResourceStore.server.html">ResourceStore.server</a></li>
            
                <li><a href="..&#x2F;classes/Url.common.html">Url.common</a></li>
            
                <li><a href="..&#x2F;classes/Y.mojito.Client.html">Y.mojito.Client</a></li>
            
                <li><a href="..&#x2F;classes/Y.mojito.lib.MojitoRouter.html">Y.mojito.lib.MojitoRouter</a></li>
            
                <li><a href="..&#x2F;classes/Y.mojito.lib.REST.html">Y.mojito.lib.REST</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/ActionContext.html">ActionContext</a></li>
            
                <li><a href="..&#x2F;modules/ActionContextAddon.html">ActionContextAddon</a></li>
            
                <li><a href="..&#x2F;modules/CommonLibs.html">CommonLibs</a></li>
            
                <li><a href="..&#x2F;modules/MojitoClient.html">MojitoClient</a></li>
            
                <li><a href="..&#x2F;modules/MojitoServer.html">MojitoServer</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: mojito_src&#x2F;source&#x2F;lib&#x2F;app&#x2F;addons&#x2F;ac&#x2F;i13n.common.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;*
 * Copyright (c) 2011-2012, Yahoo! Inc.  All rights reserved.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE file for terms.
 *&#x2F;


&#x2F;*jslint anon:true, sloppy:true, nomen:true*&#x2F;
&#x2F;*global YUI*&#x2F;


&#x2F;**
 * @module ActionContextAddon
 *&#x2F;
YUI.add(&#x27;mojito-i13n-addon&#x27;, function(Y, NAME) {

    &#x2F;**
     * Processes the following part of the mojit&#x27;s config:
     * &lt;code&gt;
     * &quot;i13n&quot; : {
     *      &quot;spaceid&quot; : 12345,
     *      &quot;page&quot;    : { &quot;val1&quot; : &quot;param1&quot;}
     * }
     * &lt;&#x2F;code&gt;
     * @method initFromConfig
     * @param {object} command The comment object providing configuration data.
     * @param {ActionContext} ac The action context.
     * @param {object} i13n The localization object.
     * @private
     *&#x2F;
    function initFromConfig(command, ac, i13n) {
        var config,
            page,
            name;

        if (this.initialized) {
            return;
        }

        &#x2F;&#x2F; get the i13n
        config = command.instance.config.i13n || null;
        if (config) {
            this.initialized = true;
            if (typeof config.spaceid === &#x27;number&#x27; ||
                    typeof config.spaceid === &#x27;string&#x27;) {

                &#x2F;&#x2F; stamp spaceid
                i13n.stamp.stampPageView(config.spaceid);

                &#x2F;&#x2F; track page params
                if (typeof config.page === &#x27;object&#x27;) {
                    page = config.page;
                    for (name in page) {
                        if (page.hasOwnProperty(name)) {
                            i13n.trackPageParams(name, page[name],
                                i13n.ULT.ULT_PRECEDENCE_DEFAULT);
                        }
                    }
                }
            }
        }
    }


    &#x2F;**
     * &lt;strong&gt;Access point:&lt;&#x2F;strong&gt; &lt;em&gt;ac.i13n.*&lt;&#x2F;em&gt;
     * Instrumentation addon for link tracking and page views.
     * @class I13n.server
     *&#x2F;
    function I13nAddon(command, adapter, ac) {
        var req;

        this._ac = ac;
        this.command = command;

        if (ac.http) {
            req = ac.http.getRequest();
            if (req &amp;&amp; req.i13n) {
                ac.i13n = req.i13n;

                &#x2F;&#x2F; additional functionality
                ac.i13n.make = I13nAddon.prototype.make;
                ac.i13n._ac = ac;

                initFromConfig.call(this, command, ac, req.i13n);
                return;
            }
        }

        ac.i13n = this;
    }


    I13nAddon.prototype = {

        &#x2F;**
         * Provides facility to create an URL to other
         * mojits with a link tracking instrumentation.
         * @method make
         * @param {string} base Reference to a mojit defined at the root
         *     level of the Mojito application configuration.
         * @param {string} action The action to associate with the base.
         * @param {object} routeParams used to lookup the route in the routing
         *     table.
         * @param {string} verb GET, POST, PUT, DELETE (case insensitive).
         * @param {object} urlParams added to the looked up route as query
         *     params.
         * @param {object} i13nParams parameters to be used for link tracking.
         *&#x2F;
        make: function(base, action, routeParams, verb, urlParams, i13nParams) {
            var result = this._ac.url.make(base, action, routeParams, verb,
                urlParams);

            if (result) {
                result = this.trackLink(result, i13nParams);
            }
            return result;
        },


        &#x2F;**
         * Stamps the page view event.
         * @param {number} spaceid The spaceid to be used.
         *&#x2F;
        stampPageView: function(spaceid) {
            &#x2F;&#x2F; TODO: implement this.
        },


        &#x2F;**
         * Tracks a pair of page parameters as (key, value) for this request.
         * @param {string} key The page parameter name.
         * @param {string} value The page parameter value.
         *&#x2F;
        trackPageParams: function(key, value) {
            &#x2F;&#x2F; TODO: implement this.
        },


        &#x2F;**
         * Tracks the link view and generates the URL with the hash token
         * appended to it.
         * @param {string} url The link to be instrumented.
         * @param {object} link_params The link parameters.
         * @param {object} local_groups - Optional.
         * @param {object} ult_args - Optional.
         * @return {string} url with the hash appended to it.
         *&#x2F;
        trackLink: function(url, link_params, local_groups, ult_args) {
            &#x2F;&#x2F; TODO: implement this.
        },


        &#x2F;**
         * Tracks the link view for the links taken from the user generated
         * content and hence need to be signed by B-cookie to prevent the
         * security problems.
         * @param {string} url The link to be instrumented.
         * @param {object} link_params The link parameters.
         * @param {object} local_groups Optional.
         * @param {object} ult_args Optional.
         * @return {string} url with the hash appended to it.
         *&#x2F;
        trackUserLink: function(url, link_params, local_groups, ult_args) {
            &#x2F;&#x2F; TODO: implement this.
        },


        &#x2F;**
         * , ,  [, ult_args [, return_code]]
         * @param {boolean} is_post_method True, if the method is POST.
         * @param {string} action_url The form action link to be instrumented.
         * @param {object} link_params Tracking parameters.
         * @param {object} ult_args Optional.
         * @return {string} form action url with the hash appended to it.
         *&#x2F;
        trackForm: function(is_post_method, action_url, link_params, ult_args) {
            &#x2F;&#x2F; TODO: implement this.
        },


        &#x2F;**
         * Instrument links for tracking of the link clicks by gemerating the
         * URL with the hash token appended to it.
         * @param {string} url The link to be instrumented.
         * @param {object} link_params The link parameters.
         * @param {object} ult_args Optional.
         * @return {string} url with the hash appended to it.
         *&#x2F;
        trackClickOnly: function(url, link_params, ult_args) {
            &#x2F;&#x2F; TODO: implement this.
        },


        &#x2F;**
         * Return spaceid used for this request.
         * @return {object} the spaceid previously set through stampPageView()
         *     or configuration.
         *&#x2F;
        getSpaceid: function() {
            &#x2F;&#x2F; TODO: implement this.
        },


        stampNonClassified: function() {
            &#x2F;&#x2F; TODO: implement this.
        },


        stampIgnore: function() {
            &#x2F;&#x2F; TODO: implement this.
        },


        isStamped: function() {
            &#x2F;&#x2F; TODO: implement this.
        }
    };

    I13nAddon.dependsOn = [&#x27;config&#x27;, &#x27;http&#x27;, &#x27;url&#x27;];

    Y.namespace(&#x27;mojito.addons.ac&#x27;).i13n = I13nAddon;

}, &#x27;0.1.0&#x27;, {requires: [
    &#x27;mojito&#x27;
]});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
