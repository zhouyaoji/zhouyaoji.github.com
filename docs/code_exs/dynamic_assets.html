

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dynamically Adding CSS to Different Devices - Mojito Code Examples</title>
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?3.5.0/build/cssgrids/cssgrids-min.css&amp;3.5.0/build/cssreset/cssreset-min.css&amp;3.5.0/build/cssfonts/cssfonts-min.css&amp;3.5.0/build/cssbutton/cssbutton-min.css">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/treeview/assets/skins/sam/treeview.css"> 
    <link rel="stylesheet" type="text/css" href="_static/mojito.css">
</head>
<body class="yui-skin-sam yui3-skin-sam seoui seoui-fixed">
	<div id="seoui-container">
	    <header>
  <div id="doc">
        <div id="hd">
            <div class="nav">
                <ul id="topnav">
                    <li><a class="navlink" href="../../">Home</a></li>
                    <li><a class="navlink" href="../">Documentation Directory</a></li>
                    <li><a class="navlink" href="">FAQ</a></li>
                    <li><a class="navlink" href="">Intro</a></li>
                    <li><a class="navlink" href="">Quickstart</a></li>
                    <li><a class="navlink" href="">Getting Started</a></li>
                    <li><a class="navlink" href="">Code Examples</a></li>
                    <li><a class="navlink" href="">Topics</a></li>
                    <li><a class="navlink" href="">Reference</a></li>
                    <li><a class="navlink" href="">Resources</a></li>
                </ul>
            </div>
        </div>

    	</header>
    	<div id="seoui-application-content">
            <div class="yui3-g">
                <div class="yui3-u-2-1">
                    
                    <div class="section" id="dynamically-adding-css-to-different-devices">
<h1>Dynamically Adding CSS to Different Devices<a class="headerlink" href="#dynamically-adding-css-to-different-devices" title="Permalink to this headline">¶</a></h1>
<p><strong>Time Estimate:</strong> 15 minutes</p>
<p><strong>Difficulty:</strong> Intermediate</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This example shows how to dynamically include assets (CSS) in the rendered view template of a mojit. The assets in this example are included in the rendered default view template and
device-specific view templates.</p>
<p>The following topics will be covered:</p>
<ul class="simple">
<li>configuring an application to dynamically include assets</li>
<li>using the <tt class="docutils literal"><span class="pre">addAssets</span></tt> method in the controller to dynamically add assets to both the rendered default and device-specific view templates</li>
</ul>
</div>
<div class="section" id="implementation-notes">
<h2>Implementation Notes<a class="headerlink" href="#implementation-notes" title="Permalink to this headline">¶</a></h2>
<p>The screenshot below shows the rendered iPhone view template with dynamically included CSS and JavaScript.</p>
<img alt="_images/dynamic_assets.device_specific.preview.gif" src="_images/dynamic_assets.device_specific.preview.gif" style="width: 208px; height: 400px;" />
<p>The <tt class="docutils literal"><span class="pre">application.json</span></tt> in this code example configures Mojito to deploy mojit code to the client and to use the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>. To deploy mojit code to the client,
you assign <tt class="docutils literal"><span class="pre">true</span></tt> to the <tt class="docutils literal"><span class="pre">deploy</span></tt> property as seen in the <tt class="docutils literal"><span class="pre">application.json</span></tt> below. The <tt class="docutils literal"><span class="pre">frame</span></tt> instance of <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> becomes the parent mojit of the <tt class="docutils literal"><span class="pre">child</span></tt>
instance of type <tt class="docutils literal"><span class="pre">device</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="mi">8666</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;device&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In the controller for the <tt class="docutils literal"><span class="pre">device</span></tt> mojit, the <tt class="docutils literal"><span class="pre">index</span></tt> function has to determine what device is making the request and then attach the appropriate meta data and CSS.
To determine the calling device, you use the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object to access the <tt class="docutils literal"><span class="pre">device</span></tt> property of the <tt class="docutils literal"><span class="pre">context</span></tt> object.  Below is a partial <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object
that contains the <tt class="docutils literal"><span class="pre">context</span></tt> object:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;ac&quot;</span><span class="p">{</span>
 <span class="p">...</span>
 <span class="nx">context</span><span class="o">:</span>
 <span class="p">{</span>
    <span class="nx">site</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">device</span><span class="o">:</span> <span class="s1">&#39;iphone&#39;</span><span class="p">,</span>
    <span class="nx">lang</span><span class="o">:</span> <span class="s1">&#39;en&#39;</span><span class="p">,</span>
    <span class="nx">region</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">jurisdiction</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">bucket</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">flavor</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">tz</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To dynamically add CSS and meta data from the controller, you use methods from the <a class="reference external" href="../../api/classes/Assets.common.html">Assets addon</a>.
In the <tt class="docutils literal"><span class="pre">controller.server.js</span></tt> below, the <tt class="docutils literal"><span class="pre">index</span></tt> function determines the calling device using the <tt class="docutils literal"><span class="pre">context</span></tt> object seen above.
To add metadata for the iPhone, the <tt class="docutils literal"><span class="pre">addBlob</span></tt> method is called from the <tt class="docutils literal"><span class="pre">Assets</span></tt> addon.
The appropriate CSS file is dynamically attached to the view template with <tt class="docutils literal"><span class="pre">ac.assets.addCss</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span><span class="nx">NAME</span><span class="p">){</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">controllers</span><span class="p">[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="nx">config</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">device</span> <span class="o">=</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">device</span><span class="p">,</span> <span class="nx">css</span> <span class="o">=</span> <span class="s1">&#39;/static/device/assets/simple&#39;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">device</span> <span class="o">===</span> <span class="s1">&#39;iphone&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Attach viewport meta-data</span>
        <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addBlob</span><span class="p">(</span><span class="s1">&#39;&lt;meta name = &quot;viewport&quot; content = &quot;width = device-width&quot;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">);</span>
        <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addBlob</span><span class="p">(</span><span class="s1">&#39;&lt;meta name = &quot;viewport&quot; content = &quot;initial-scale = 1.0&quot;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">);</span>
        <span class="c1">// Modify the style sheet name.</span>
        <span class="nx">css</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">device</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">// Attach the style sheet.</span>
      <span class="nx">css</span> <span class="o">+=</span> <span class="s1">&#39;.css&#39;</span><span class="p">;</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addCss</span><span class="p">(</span><span class="nx">css</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">);</span>
      <span class="c1">// Push data to the template.</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Device Assets&quot;</span><span class="p">,</span>
        <span class="nx">colors</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#616536&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;brown&quot;</span><span class="p">,</span> <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#593E1A&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;grey&quot;</span><span class="p">,</span>  <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#777B88&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>  <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#3D72A4&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>   <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#990033&quot;</span><span class="p">}</span>
        <span class="p">]</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">index.iphone</span></tt> view template below contains CSS for controlling the orientation of the page, which is needed for displaying the page correctly on an iPhone. When the template is rendered,
the CSS is dynamically added, and the Mustache tags are replaced with values. If the device making the call is an iPhone, the <tt class="docutils literal"><span class="pre">viewport</span></tt> meta data will also be added dynamically.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">updateView</span><span class="p">);</span>
  <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">lastWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">updateView</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">!=</span> <span class="nx">lastWidth</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">lastWidth</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">orient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">lastWidth</span> <span class="o">==</span> <span class="mi">320</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;portrait&quot;</span> <span class="o">:</span> <span class="s2">&quot;landscape&quot;</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;orient&quot;</span><span class="p">,</span> <span class="nx">orient</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="c1">// Changes background color of the header.</span>
  <span class="c1">// Note: JavaScript code should not be hard coded</span>
  <span class="c1">// into the view template. It&#39;s done</span>
  <span class="c1">// here to simplify the code example.</span>
  <span class="kd">function</span> <span class="nx">setColor</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">color</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;style&gt;</span>
  <span class="nt">body</span><span class="o">[</span><span class="nt">orient</span><span class="o">=</span><span class="s2">&quot;portrait&quot;</span><span class="o">]</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">320px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">480px</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">body</span><span class="o">[</span><span class="nt">orient</span><span class="o">=</span><span class="s2">&quot;landscape&quot;</span><span class="o">]</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">480px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">320px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;{{mojit_view_id}}&quot;</span> <span class="na">class=</span><span class="s">&quot;mojit&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">&quot;header&quot;</span><span class="nt">&gt;</span>{{title}}<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;toolbar&quot;</span><span class="nt">&gt;</span>
  {{#colors}}
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">onClick=</span><span class="s">&quot;setColor(&#39;header&#39;,&#39;{{rgb}}&#39;);&quot;</span><span class="nt">&gt;</span>{{id}}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  {{/colors}}
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-up-this-example">
<h2>Setting Up this Example<a class="headerlink" href="#setting-up-this-example" title="Permalink to this headline">¶</a></h2>
<p>To create and run <tt class="docutils literal"><span class="pre">device_assets</span></tt>:</p>
<ol class="arabic">
<li><p class="first">Create your application.</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">create</span> <span class="pre">app</span> <span class="pre">device_assets</span></tt></p>
</li>
<li><p class="first">Change to the application directory.</p>
</li>
<li><p class="first">Create your mojit.</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">create</span> <span class="pre">mojit</span> <span class="pre">device</span></tt></p>
</li>
<li><p class="first">To configure your application to use <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> and include JavaScript, replace the code in <tt class="docutils literal"><span class="pre">application.json</span></tt> with the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="mi">8666</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;device&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">To configure routing, create the file <tt class="docutils literal"><span class="pre">routes.json</span></tt> with the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;_framed_view&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;frame.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Change to <tt class="docutils literal"><span class="pre">mojits/device</span></tt>.</p>
</li>
<li><p class="first">Modify your controller to dynamically add assets to the rendered view template by replacing the code in <tt class="docutils literal"><span class="pre">controller.server.js</span></tt> with the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span><span class="nx">NAME</span><span class="p">){</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">controllers</span><span class="p">[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="nx">config</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">device</span> <span class="o">=</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">device</span><span class="p">,</span> <span class="nx">css</span> <span class="o">=</span> <span class="s1">&#39;/static/device/assets/simple&#39;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">device</span> <span class="o">===</span> <span class="s1">&#39;iphone&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Attach viewport meta-data</span>
        <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addBlob</span><span class="p">(</span><span class="s1">&#39;&lt;meta name = &quot;viewport&quot; content = &quot;width = device-width&quot;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">);</span>
        <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addBlob</span><span class="p">(</span><span class="s1">&#39;&lt;meta name = &quot;viewport&quot; content = &quot;initial-scale = 1.0&quot;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">);</span>
        <span class="c1">// Modify the style sheet name.</span>
        <span class="nx">css</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">device</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">// Attach the style sheet.</span>
      <span class="nx">css</span> <span class="o">+=</span> <span class="s1">&#39;.css&#39;</span><span class="p">;</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addCss</span><span class="p">(</span><span class="nx">css</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">);</span>
      <span class="c1">// Push data to the template.</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Device Assets&quot;</span><span class="p">,</span>
        <span class="nx">colors</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#616536&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;brown&quot;</span><span class="p">,</span> <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#593E1A&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;grey&quot;</span><span class="p">,</span>  <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#777B88&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>  <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#3D72A4&quot;</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>   <span class="nx">rgb</span><span class="o">:</span> <span class="s2">&quot;#990033&quot;</span><span class="p">}</span>
        <span class="p">]</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
</li>
<li><p class="first">To create the default <tt class="docutils literal"><span class="pre">index</span></tt> view template, replace the code in <tt class="docutils literal"><span class="pre">views/index.mu.html</span></tt> with the following:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
      <span class="c1">// Changes background color of the header.</span>
      <span class="c1">// Note: JavaScript code should not be hard coded into the view template. It&#39;s done</span>
      <span class="c1">// here to simplify the code example.</span>
      <span class="kd">function</span> <span class="nx">setColor</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">color</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;{{mojit_view_id}}&quot;</span> <span class="na">class=</span><span class="s">&quot;mojit&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">&quot;header&quot;</span><span class="nt">&gt;</span>{{title}}<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;toolbar&quot;</span><span class="nt">&gt;</span>
      {{#colors}}
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">onClick=</span><span class="s">&quot;setColor(&#39;header&#39;,&#39;{{rgb}}&#39;);&quot;</span><span class="nt">&gt;</span>{{id}}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      {{/colors}}
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">To create the default iPhone view template, create the file <tt class="docutils literal"><span class="pre">views/index.iphone.mu.html</span></tt> with the following:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">updateView</span><span class="p">);</span>
  <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">lastWidth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">updateView</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">!=</span> <span class="nx">lastWidth</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">lastWidth</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">orient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">lastWidth</span> <span class="o">==</span> <span class="mi">320</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;portrait&quot;</span> <span class="o">:</span> <span class="s2">&quot;landscape&quot;</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;orient&quot;</span><span class="p">,</span> <span class="nx">orient</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="c1">// Changes background color of the header.</span>
  <span class="c1">// Note: JavaScript code should not be hard coded</span>
  <span class="c1">// into the view template. It&#39;s done</span>
  <span class="c1">// here to simplify the code example.</span>
  <span class="kd">function</span> <span class="nx">setColor</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">color</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;style&gt;</span>
  <span class="nt">body</span><span class="o">[</span><span class="nt">orient</span><span class="o">=</span><span class="s2">&quot;portrait&quot;</span><span class="o">]</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">320px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">480px</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">body</span><span class="o">[</span><span class="nt">orient</span><span class="o">=</span><span class="s2">&quot;landscape&quot;</span><span class="o">]</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">480px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">320px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;{{mojit_view_id}}&quot;</span> <span class="na">class=</span><span class="s">&quot;mojit&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">&quot;header&quot;</span><span class="nt">&gt;</span>{{title}}<span class="nt">&lt;/h2&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;toolbar&quot;</span><span class="nt">&gt;</span>
    {{#colors}}
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span> <span class="na">onClick=</span><span class="s">&quot;setColor(&#39;header&#39;,&#39;{{rgb}}&#39;);&quot;</span><span class="nt">&gt;</span>{{id}}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    {{/colors}}
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Create the file <tt class="docutils literal"><span class="pre">assets/simple.css</span></tt> for the CSS that is included in <tt class="docutils literal"><span class="pre">index.mu.html</span></tt> with the following:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="k">margin</span><span class="o">:</span><span class="k">auto</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">40</span><span class="o">%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">h2</span> <span class="p">{</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span> <span class="m">0px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">ul</span><span class="nc">.toolbar</span> <span class="p">{</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.toolbar</span> <span class="nt">li</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span><span class="k">inline</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Create the file <tt class="docutils literal"><span class="pre">assets/simple.iphone.css</span></tt> for the CSS that is included in <tt class="docutils literal"><span class="pre">index.iphone.html</span></tt> with the following:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="k">margin</span><span class="o">:</span><span class="k">auto</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">40</span><span class="o">%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">h2</span> <span class="p">{</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:</span> <span class="m">5px</span> <span class="m">0px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">8.0em</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">ul</span><span class="nc">.toolbar</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">17.0em</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.toolbar</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">;</span>
  <span class="k">padding</span><span class="o">:.</span><span class="m">6em</span> <span class="m">0em</span> <span class="m">.6em</span> <span class="m">0em</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">From the application directory, run the server.</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">start</span></tt></p>
</li>
<li><p class="first">To view your application, go to the URL:</p>
<p><a class="reference external" href="http://localhost:8666">http://localhost:8666</a></p>
</li>
<li><p class="first">To see the page rendered for the iPhone, view the above URL from an iPhone or use the URL below with the device parameter:</p>
<p><a class="reference external" href="http://localhost:8666?device=iphone">http://localhost:8666?device=iphone</a></p>
</li>
</ol>
</div>
<div class="section" id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://github.com/yahoo/mojito/tree/master/examples/developer-guide/device_assets/mojits/device/assets/">Assets</a></li>
<li><a class="reference external" href="http://github.com/yahoo/mojito/tree/master/examples/developer-guide/device_assets/mojits/device/views/">Views</a></li>
<li><a class="reference external" href="http://github.com/yahoo/mojito/tree/master/examples/developer-guide/device_assets/mojits/device/controller.server.js">Mojit Controller</a></li>
<li><a class="reference external" href="http://github.com/yahoo/mojito/tree/master/examples/developer-guide/device_assets/">Device Assets Application</a></li>
</ul>
</div>
</div>

                </div>
            </div>
            
    	</div>
	</div>
	<footer>
            <div id="ft">
        <span class="copyright">Copyright &copy; 2012 Yahoo! Inc. All rights reserved.</span>
        <ul id="ft-tou">
            <li>
                <a href="http://privacy.yahoo.com/privacy/us/pipes">Your Privacy</a> 
            </li>
            <li>
                <a href="http://info.yahoo.com/legal/us/yahoo/pipes/pipes-4396.html">Terms of Use</a> 
            </li>
            <li>
                <a href="http://docs.yahoo.com/info/copyright/copyright.html">Copyright/IP Policy</a>
            </li>
            <li class="last">
                <a href="http://suggestions.yahoo.com/?prop=Mojito">Feedback</a>
            </li>
        </ul>
    </div><!--/#ft --> 
	</footer>
</body>
</html>