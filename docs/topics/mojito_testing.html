

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Testing - Mojito Topics</title>
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?3.5.0/build/cssgrids/cssgrids-min.css&amp;3.5.0/build/cssreset/cssreset-min.css&amp;3.5.0/build/cssfonts/cssfonts-min.css&amp;3.5.0/build/cssbutton/cssbutton-min.css">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/treeview/assets/skins/sam/treeview.css"> 
    <link rel="stylesheet" type="text/css" href="../../assets/mojito.css">
</head>
<body class="yui-skin-sam yui3-skin-sam seoui seoui-fixed">
	<div id="seoui-container">
	    <header>
  <div id="doc">
        <div id="hd">
            <div class="nav">
                <ul id="topnav">
                    <li><a class="navlink" href="../../">Home</a></li>
                    <li><a class="navlink" href="../">Documentation Directory</a></li>
                    <li><a class="navlink" href="">FAQ</a></li>
                    <li><a class="navlink" href="">Intro</a></li>
                    <li><a class="navlink" href="">Quickstart</a></li>
                    <li><a class="navlink" href="">Getting Started</a></li>
                    <li><a class="navlink" href="">Code Examples</a></li>
                    <li><a class="navlink" href="">Topics</a></li>
                    <li><a class="navlink" href="">Reference</a></li>
                    <li><a class="navlink" href="">Resources</a></li>
                </ul>
            </div>
        </div>

    	</header>
    	<div id="seoui-application-content">
            <div class="yui3-g">
                <div class="yui3-u-2-1">
                    
                    <div class="section" id="testing">
<h1>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h1>
<p>Mojito provides a testing framework based on <a class="reference external" href="http://yuilibrary.com/yuitest/">YUI Test</a> that allows you to run unit tests for the framework, modules, applications,
mojit controllers, mojit models, and mojit binders.</p>
<p>The next few sections show you how to run specific tests with the <tt class="docutils literal"><span class="pre">mojito</span></tt> command.</p>
<div class="section" id="conventions">
<h2>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Tests should be in the following directories:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">{app_name}/tests</span></tt> - application tests</li>
<li><tt class="docutils literal"><span class="pre">{app_name}/mojits/{mojit_name}/tests</span></tt> - mojit tests</li>
<li><tt class="docutils literal"><span class="pre">{app_name}/autoload/{yui_module}/tests</span></tt> - tests for application-level YUI modules</li>
<li><tt class="docutils literal"><span class="pre">{app_name}/mojits/{mojit_name}/autoload/{yui_module}/tests</span></tt> - tests for mojit-level YUI modules</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Syntax for the name of the test file: <tt class="docutils literal"><span class="pre">{yui_module}.{affinity}-tests.js</span></tt></p>
<blockquote>
<div><p>For example, the name of the unit test YUI module for the <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> mojit with the <tt class="docutils literal"><span class="pre">server</span></tt> affinity would be <tt class="docutils literal"><span class="pre">HelloMojit-tests.server.js</span></tt>.</p>
</div></blockquote>
</li>
<li><p class="first">The unit test YUI module should include the target module and the <tt class="docutils literal"><span class="pre">mojito-test</span></tt> module in the <tt class="docutils literal"><span class="pre">requires</span></tt> array. The requires array includes the <tt class="docutils literal"><span class="pre">mojito-test</span></tt> module and the target module <tt class="docutils literal"><span class="pre">HelloMojit</span></tt>:</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">requires</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;mojito-test&#39;</span><span class="p">,</span> <span class="s1">&#39;HelloMojit&#39;</span> <span class="p">]</span> <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Test files that are <strong>not</strong> in a <tt class="docutils literal"><span class="pre">tests</span></tt> directory may be found by Mojito as long as the file name has the suffix <tt class="docutils literal"><span class="pre">-tests</span></tt>.
The suggested practice though is to place all test files in the <tt class="docutils literal"><span class="pre">tests</span></tt> directories shown above.</p>
</div>
</div>
<div class="section" id="framework-tests">
<h2>Framework Tests<a class="headerlink" href="#framework-tests" title="Permalink to this headline">¶</a></h2>
<p>After you have installed Mojito, you should run the framework test to confirm that Mojito installed correctly and that Node.js has been given permission to access the file system.</p>
<p>To test the Mojito framework, run the following:</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">test</span></tt></p>
</div>
<div class="section" id="application-tests">
<h2>Application Tests<a class="headerlink" href="#application-tests" title="Permalink to this headline">¶</a></h2>
<p>Running applications tests is much like running the framework tests above. The following command runs tests for all of the mojits of a Mojito application.</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">test</span> <span class="pre">app</span> <span class="pre">{path-to-app}/{application-name}</span></tt></p>
<p>To run one specific test in your application, use the following where <tt class="docutils literal"><span class="pre">[test-name]</span></tt> is either the YUI module or the module to be tested.</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">test</span> <span class="pre">app</span> <span class="pre">{path-to-app}/{application-name}</span> <span class="pre">[test-name]</span></tt></p>
</div>
<div class="section" id="mojit-tests">
<h2>Mojit Tests<a class="headerlink" href="#mojit-tests" title="Permalink to this headline">¶</a></h2>
<p>You create unit tests for your mojits and execute them also using the <tt class="docutils literal"><span class="pre">mojito</span></tt> command. Mojit tests must require (included in the YUI <tt class="docutils literal"><span class="pre">require</span></tt> array) the
module undergoing testing and the Mojito Test module <tt class="docutils literal"><span class="pre">mojito-test</span></tt>. For example, if the <tt class="docutils literal"><span class="pre">Foo</span></tt> module was being tested, the <tt class="docutils literal"><span class="pre">requires</span></tt> array would include the <tt class="docutils literal"><span class="pre">Foo</span></tt>
and <tt class="docutils literal"><span class="pre">mojit-test</span></tt> modules as seen here: <tt class="docutils literal"><span class="pre">requires:</span> <span class="pre">[</span> <span class="pre">'Foo',</span> <span class="pre">'mojit-test']</span></tt></p>
<p>By default, Mojito uses the <a class="reference external" href="http://yuilibrary.com/yuitest/">YUI Test</a> framework for the <a class="reference external" href="http://en.wikipedia.org/wiki/Test_harness">test harness</a> and assertion functions.
Each mojit test will be executed within a YUI instance along with its required dependencies, so you can be assured to only have properly scoped values.</p>
<div class="section" id="types-of-mojit-tests">
<h3>Types of Mojit Tests<a class="headerlink" href="#types-of-mojit-tests" title="Permalink to this headline">¶</a></h3>
<p>The following three types of mojit tests exist:</p>
<ul class="simple">
<li>binder tests</li>
<li>controller tests</li>
<li>model tests</li>
</ul>
</div>
<div class="section" id="testing-standards">
<h3>Testing Standards<a class="headerlink" href="#testing-standards" title="Permalink to this headline">¶</a></h3>
<p>To use the Mojito test harness, you are required to name files and testing modules according to certain rules. The name of the test file must have the same
<a class="reference external" href="../reference/glossary.html">affinity</a> as the file being tested and have the string <tt class="docutils literal"><span class="pre">-tests</span></tt> appended to the affinity. For example, the mojit controller with
the <tt class="docutils literal"><span class="pre">common</span></tt> affinity would be <tt class="docutils literal"><span class="pre">controller.common.js</span></tt>, so the name of the test file must be <tt class="docutils literal"><span class="pre">controller.common-tests.js</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">controller.common.js</span></tt> below requires the <tt class="docutils literal"><span class="pre">Foo</span></tt> module.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">});</span>
</pre></div>
</div>
<p>To test the <tt class="docutils literal"><span class="pre">Foo</span></tt>, module, the the test file <tt class="docutils literal"><span class="pre">controller.common-tests.js</span></tt> would require the <tt class="docutils literal"><span class="pre">Foo-tests</span></tt> module as seen below.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;Foo-tests&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">},</span> <span class="s1">&#39;VERSION&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito-test&#39;</span><span class="p">,</span> <span class="s1">&#39;Foo&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="binder-tests">
<h3>Binder Tests<a class="headerlink" href="#binder-tests" title="Permalink to this headline">¶</a></h3>
<p>You can create multiple binder tests and place them in the <tt class="docutils literal"><span class="pre">tests/binders</span></tt> directory. For example, if your binder is <tt class="docutils literal"><span class="pre">binders/index.js</span></tt>, the test file would
be <tt class="docutils literal"><span class="pre">tests/binders/index.common-test.js</span></tt>. Notice that the affinity is <tt class="docutils literal"><span class="pre">common</span></tt>, which can be used for binders on the client or server and is also the default binder test file.</p>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Below is the binder <tt class="docutils literal"><span class="pre">index.js</span></tt> that includes the <tt class="docutils literal"><span class="pre">FooBinderIndex</span></tt> module:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;FooBinderIndex&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.binders&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mojitProxy</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">mojitProxy</span> <span class="o">=</span> <span class="nx">mojitProxy</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">bind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">nodeId</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">binderId</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">mojitProxy</span><span class="p">.</span><span class="nx">_viewId</span><span class="p">;</span>
      <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">nodeId</span> <span class="o">+</span> <span class="s1">&#39; node bound&#39;</span><span class="p">,</span> <span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">nodeId</span> <span class="o">!==</span> <span class="nx">binderId</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;bad node binding to binder!&quot;</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;&lt;p&gt;&quot;</span> <span class="o">+</span> <span class="nx">nodeId</span> <span class="o">+</span> <span class="s2">&quot; bound&lt;/p&gt;&quot;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">_updateId</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodeId</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
      <span class="nx">msg</span> <span class="o">=</span> <span class="nx">msg</span> <span class="o">||</span> <span class="s1">&#39;bound&#39;</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="nx">nodeId</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">msg</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">handleClick</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="s2">&quot;clicked on &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
<p>The test binder file <tt class="docutils literal"><span class="pre">tests/binders/index-common-tests.js</span></tt> below includes the module <tt class="docutils literal"><span class="pre">FooBinderIndex-tests</span></tt> and the requires <tt class="docutils literal"><span class="pre">array</span></tt> includes the <tt class="docutils literal"><span class="pre">FooBinderIndex</span></tt> module:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;FooBinderIndex-tests&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestSuite</span><span class="p">(</span><span class="nx">NAME</span><span class="p">),</span>
  <span class="nx">binder</span><span class="p">,</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">Assert</span><span class="p">;</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestCase</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Foo binder index tests&#39;</span><span class="p">,</span>
    <span class="nx">setUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">binder</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">binders</span><span class="p">.</span><span class="nx">FooBinderIndex</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">tearDown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">binder</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s1">&#39;test update id&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">Node</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;&lt;div id=&#39;guid123&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">);</span>
      <span class="nx">binder</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
        <span class="nx">_guid</span><span class="o">:</span> <span class="s1">&#39;guid123&#39;</span>
      <span class="p">});</span>
      <span class="nx">binder</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
      <span class="nx">binder</span><span class="p">.</span><span class="nx">_updateId</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">).</span><span class="nx">getContent</span><span class="p">();</span>
      <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
      <span class="nx">A</span><span class="p">.</span><span class="nx">areSame</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="s1">&#39;guid123 hello&#39;</span><span class="p">,</span> <span class="s1">&#39;the node was not updated&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}));</span>
  <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestRunner</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito-test&#39;</span><span class="p">,</span> <span class="s1">&#39;node&#39;</span><span class="p">,</span> <span class="s1">&#39;FooBinderIndex&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="controller-tests">
<h3>Controller Tests<a class="headerlink" href="#controller-tests" title="Permalink to this headline">¶</a></h3>
<p>A mojit can have one or more controllers that have different affinities. For each controller, you can create create a test controller with the same affinity or
use <tt class="docutils literal"><span class="pre">controller.common-tests.js</span></tt>, which tests controllers with any affinity. For example,  <tt class="docutils literal"><span class="pre">controller.server.js</span></tt> can be tested with <tt class="docutils literal"><span class="pre">controller.server-tests.js</span></tt>
or <tt class="docutils literal"><span class="pre">controller.common-tests.js</span></tt>.</p>
<div class="section" id="id2">
<h4>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">controller.server.js</span></tt> below requires the <tt class="docutils literal"><span class="pre">Foo</span></tt> module.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">controller</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">mojitSpec</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">spec</span> <span class="o">=</span> <span class="nx">mojitSpec</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
<p>To test the controller of the <tt class="docutils literal"><span class="pre">Foo</span></tt> mojit, create a file in the tests directory called <tt class="docutils literal"><span class="pre">controller.common-tests.js</span></tt> that includes the <tt class="docutils literal"><span class="pre">Foo-tests</span></tt> module as seen below.
Note that the reference to the controller is gotten using <tt class="docutils literal"><span class="pre">Y.mojito.controller</span></tt> or <tt class="docutils literal"><span class="pre">Y.mojito.controllers[NAME]</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;Foo-tests&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestSuite</span><span class="p">(</span><span class="nx">NAME</span><span class="p">),</span>
  <span class="nx">controller</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nx">A</span> <span class="o">=</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">Assert</span><span class="p">;</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestCase</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Foo tests&#39;</span><span class="p">,</span>
    <span class="nx">setUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">controller</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">controller</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">tearDown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">controller</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s1">&#39;test mojit&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ac</span><span class="p">,</span> <span class="nx">doneCalled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">A</span><span class="p">.</span><span class="nx">isNotNull</span><span class="p">(</span><span class="nx">controller</span><span class="p">);</span>
      <span class="nx">A</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">);</span>
      <span class="nx">ac</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">done</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">doneCalled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">A</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="nx">controller</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="nx">ac</span><span class="p">);</span>
      <span class="nx">A</span><span class="p">.</span><span class="nx">isTrue</span><span class="p">(</span><span class="nx">compCalled</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}));</span>
  <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestRunner</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito-test&#39;</span><span class="p">,</span> <span class="s1">&#39;Foo&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-with-the-mockactioncontext-object">
<h3>Testing with the MockActionContext Object<a class="headerlink" href="#testing-with-the-mockactioncontext-object" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">mojito-test</span></tt> YUI module allows you to create the mock object <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> to test without dependencies. Using the <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> object,
you can easily build an <tt class="docutils literal"><span class="pre">ActionContext</span></tt> for your controller, addon, and model tests. To learn more information about using YUI to create mock objects,
see <a class="reference external" href="http://yuilibrary.com/yuitest/#mockobjects">YUI Test Standalone Library: Mock Objects</a>.</p>
<div class="section" id="using-the-mock-actioncontext">
<h4>Using the Mock ActionContext<a class="headerlink" href="#using-the-mock-actioncontext" title="Permalink to this headline">¶</a></h4>
<p>The following sections will explain the below example code that creates a simple <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> that tests the <tt class="docutils literal"><span class="pre">done</span></tt> function and verifies it was called correctly.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">ac</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">MockActionContext</span><span class="p">();</span>
<span class="nx">ac</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;done&#39;</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">Object</span><span class="p">],</span>
    <span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">YUITest</span><span class="p">.</span><span class="nx">ObjectAssert</span><span class="p">.</span><span class="nx">areEqual</span><span class="p">({</span> <span class="nx">just</span><span class="o">:</span> <span class="s1">&#39;testing&#39;</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
<span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">actionUnderTest</span><span class="p">(</span><span class="nx">ac</span><span class="p">);</span>
<span class="nx">ac</span><span class="p">.</span><span class="nx">verify</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="creating-the-mockactioncontext-object">
<h5>Creating the MockActionContext Object<a class="headerlink" href="#creating-the-mockactioncontext-object" title="Permalink to this headline">¶</a></h5>
<p>To mock the <tt class="docutils literal"><span class="pre">ActionContext</span></tt>, the <tt class="docutils literal"><span class="pre">mojito-test</span></tt> YUI module provides the <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> constructor that returns a mocked <tt class="docutils literal"><span class="pre">ActionContext</span></tt> as shown below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">ac</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">MockActionContext</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-test-expectations">
<h5>Setting Test Expectations<a class="headerlink" href="#setting-test-expectations" title="Permalink to this headline">¶</a></h5>
<p>To test with the <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> object, you use the <tt class="docutils literal"><span class="pre">expect</span></tt> method and pass it an <tt class="docutils literal"><span class="pre">expectation</span></tt> object containing the properties <tt class="docutils literal"><span class="pre">method</span></tt>, <tt class="docutils literal"><span class="pre">args</span></tt>, and <tt class="docutils literal"><span class="pre">run</span></tt>.
These properties, in turn, contain the controller method to test, the function parameters, and the test function.</p>
<p>In the code snippet below, the <tt class="docutils literal"><span class="pre">expect</span></tt> method creates a test for the controller method <tt class="docutils literal"><span class="pre">done</span></tt>, using the <tt class="docutils literal"><span class="pre">YUITest</span></tt> module to perform an assertion on the
function&#8217;s return value.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">ac</span><span class="p">.</span><span class="nx">expect</span><span class="p">({</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;done&#39;</span><span class="p">,</span>
  <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">Object</span><span class="p">],</span>
  <span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">YUITest</span><span class="p">.</span><span class="nx">ObjectAssert</span><span class="p">.</span><span class="nx">areEqual</span><span class="p">({</span> <span class="nx">just</span><span class="o">:</span> <span class="s1">&#39;testing&#39;</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-mojito-to-test-mockactioncontext-object">
<h5>Configuring Mojito to Test MockActionContext Object<a class="headerlink" href="#configuring-mojito-to-test-mockactioncontext-object" title="Permalink to this headline">¶</a></h5>
<p>To configure Mojito to use your <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> object to run test, use the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">actionUnderTest</span><span class="p">(</span><span class="nx">ac</span><span class="p">);</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">actionUnderTest</span></tt> function fails to call the <tt class="docutils literal"><span class="pre">done</span></tt> function, calls it more than one time, or calls it with the wrong parameters, the test will fail.</p>
</div>
<div class="section" id="running-the-test">
<h5>Running the Test<a class="headerlink" href="#running-the-test" title="Permalink to this headline">¶</a></h5>
<p>Finally, run the expectation by call the <tt class="docutils literal"><span class="pre">verify</span></tt> method from the <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> object as seen here:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">ac</span><span class="p">.</span><span class="nx">verify</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Expectations for addons, models, and extras will be be verified automatically when you call the main <tt class="docutils literal"><span class="pre">verify</span></tt> function from the  <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> object.</p>
</div>
</div>
</div>
<div class="section" id="example-expectations">
<h4>Example Expectations<a class="headerlink" href="#example-expectations" title="Permalink to this headline">¶</a></h4>
<div class="section" id="passing-multiple-expectation-objects">
<h5>Passing Multiple expectation Objects<a class="headerlink" href="#passing-multiple-expectation-objects" title="Permalink to this headline">¶</a></h5>
<p>You can pass many <tt class="docutils literal"><span class="pre">expectation</span></tt> objects to the <tt class="docutils literal"><span class="pre">expect</span></tt> method:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">expect</span><span class="p">({</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;preLoadImages&#39;</span><span class="p">,</span>
  <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">Object</span><span class="p">],</span>
  <span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">OA</span><span class="p">.</span><span class="nx">areEqual</span><span class="p">([</span><span class="s1">&#39;thepath&#39;</span><span class="p">,</span><span class="s1">&#39;thepath&#39;</span><span class="p">],</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">callCount</span><span class="o">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;getUrl&#39;</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">String</span><span class="p">],</span>
    <span class="nx">returns</span><span class="o">:</span> <span class="s1">&#39;thepath&#39;</span><span class="p">,</span>
    <span class="nx">callCount</span><span class="o">:</span> <span class="mi">3</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;addCss&#39;</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;thepath&#39;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="chaining-expect-methods">
<h5>Chaining expect Methods<a class="headerlink" href="#chaining-expect-methods" title="Permalink to this headline">¶</a></h5>
<p>You can also chain <tt class="docutils literal"><span class="pre">expect</span></tt> methods:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;preLoadImages&#39;</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">Object</span><span class="p">],</span>
    <span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">OA</span><span class="p">.</span><span class="nx">areEqual</span><span class="p">([</span><span class="s1">&#39;thepath&#39;</span><span class="p">,</span><span class="s1">&#39;thepath&#39;</span><span class="p">],</span> <span class="nx">arr</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">callCount</span><span class="o">:</span> <span class="mi">1</span>
  <span class="p">}).</span><span class="nx">expect</span><span class="p">({</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;getUrl&#39;</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">String</span><span class="p">],</span>
    <span class="nx">returns</span><span class="o">:</span> <span class="s1">&#39;thepath&#39;</span><span class="p">,</span>
    <span class="nx">callCount</span><span class="o">:</span> <span class="mi">3</span>
  <span class="p">}).</span><span class="nx">expect</span><span class="p">({</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;addCss&#39;</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;thepath&#39;</span><span class="p">]</span>
  <span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="mocking-addons">
<h4>Mocking Addons<a class="headerlink" href="#mocking-addons" title="Permalink to this headline">¶</a></h4>
<p>To use the MockActionContext object to test different addons, you specify the namespaces of the addons within the <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> constructor:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">ac</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">MockActionContext</span><span class="p">({</span>
  <span class="nx">addons</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;intl&#39;</span><span class="p">,</span> <span class="s1">&#39;assets&#39;</span><span class="p">]</span>
<span class="p">});</span>
<span class="nx">ac</span><span class="p">.</span><span class="nx">intl</span><span class="p">.</span><span class="nx">expect</span><span class="p">({</span>
  <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;lang&#39;</span><span class="p">,</span>
  <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;UPDATING&#39;</span><span class="p">],</span>
  <span class="nx">returns</span><span class="o">:</span> <span class="s1">&#39;updating, yo&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="section" id="mocking-custom-addons">
<h5>Mocking Custom Addons<a class="headerlink" href="#mocking-custom-addons" title="Permalink to this headline">¶</a></h5>
<p>To create a custom addon that contains functions within a property, you might have an addon that is used in the following way:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">ac</span><span class="p">.</span><span class="nx">customAddon</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>To test the addon, you pass the <tt class="docutils literal"><span class="pre">addons</span></tt> array with a list of the addons you want to test to the  <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> constructor as seen below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">ac</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">MockActionContext</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">addons</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;customAddon&#39;</span><span class="p">],</span>
    <span class="nx">extras</span><span class="o">:</span> <span class="p">{</span> <span class="nx">customAddon</span><span class="o">:</span> <span class="s1">&#39;params&#39;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This will give you a mock object at <tt class="docutils literal"><span class="pre">ac.customAddon.params</span></tt> from which you can call <tt class="docutils literal"><span class="pre">expect</span></tt>.</p>
</div>
<div class="section" id="mocking-models">
<h5>Mocking Models<a class="headerlink" href="#mocking-models" title="Permalink to this headline">¶</a></h5>
<p>To test models with the <tt class="docutils literal"><span class="pre">MockActionContext</span></tt> object, you pass the <tt class="docutils literal"><span class="pre">models</span></tt> array with the model YUI modules as is done with addons:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">ac</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">MockActionContext</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">addons</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;intl&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">],</span>
    <span class="nx">models</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">);</span>
<span class="nx">ac</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">foo</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span>
  <span class="p">{</span>
    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;getData&#39;</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">[</span><span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">Object</span><span class="p">,</span>
    <span class="nx">YUITest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">.</span><span class="nx">Value</span><span class="p">.</span><span class="nb">Function</span><span class="p">],</span>
    <span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prms</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cb</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="nx">my</span><span class="o">:</span> <span class="s1">&#39;data&#39;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="model-tests">
<h3>Model Tests<a class="headerlink" href="#model-tests" title="Permalink to this headline">¶</a></h3>
<p>Model tests are largely the same as controller tests, except there can be many of them.  The model tests are placed in the <tt class="docutils literal"><span class="pre">tests/models</span></tt> directory. You can create multiple
model tests or use <tt class="docutils literal"><span class="pre">models.common-tests.js</span></tt> to test both server and client models.</p>
<div class="section" id="id3">
<h4>Example<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">model.server.js</span></tt> below includes the <tt class="docutils literal"><span class="pre">FooModel</span></tt> module.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;FooModel&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">Foo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">getData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">callback</span><span class="p">({</span><span class="nx">some</span><span class="o">:</span><span class="s1">&#39;data&#39;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[]});</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">tests/models/models.common-tests.js</span></tt> test below includes the <tt class="docutils literal"><span class="pre">FooModel-tests</span></tt> module and the <tt class="docutils literal"><span class="pre">requires</span></tt> array contains the <tt class="docutils literal"><span class="pre">FooModel</span></tt> module.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;FooModel-tests&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestSuite</span><span class="p">(</span><span class="nx">NAME</span><span class="p">),</span>
  <span class="nx">model</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nx">A</span> <span class="o">=</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">Assert</span><span class="p">;</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestCase</span><span class="p">({</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Foo model tests&#39;</span><span class="p">,</span>
    <span class="nx">setUp</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">model</span> <span class="o">=</span> <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">models</span><span class="p">.</span><span class="nx">Layout</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">tearDown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">model</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s1">&#39;test mojit model&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">A</span><span class="p">.</span><span class="nx">isNotNull</span><span class="p">(</span><span class="nx">model</span><span class="p">);</span>
      <span class="nx">A</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">getData</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}));</span>
  <span class="nx">YUITest</span><span class="p">.</span><span class="nx">TestRunner</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito-test&#39;</span><span class="p">,</span> <span class="s1">&#39;FooModel&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="module-tests">
<h2>Module Tests<a class="headerlink" href="#module-tests" title="Permalink to this headline">¶</a></h2>
<p>You can run specific unit tests for modules of the Mojito framework. When you test a module, Mojito will look for framework tests found in <tt class="docutils literal"><span class="pre">path-to-node/node/mojito/tests</span></tt>.</p>
<p>You can provide either the YUI module name of the test or the class it is testing. For example, to test the module <tt class="docutils literal"><span class="pre">foo</span></tt> with the test called <tt class="docutils literal"><span class="pre">foo-test</span></tt>, use either of
the following commands:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">test</span> <span class="pre">foo</span></tt></li>
<li><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">test</span> <span class="pre">foo-test</span></tt></li>
</ul>
</div>
</div>

                </div>
            </div>
            
    	</div>
	</div>
	<footer>
            <div id="ft">
        <span class="copyright">Copyright &copy; 2012 Yahoo! Inc. All rights reserved.</span>
        <ul id="ft-tou">
            <li>
                <a href="http://privacy.yahoo.com/privacy/us/pipes">Your Privacy</a> 
            </li>
            <li>
                <a href="http://info.yahoo.com/legal/us/yahoo/pipes/pipes-4396.html">Terms of Use</a> 
            </li>
            <li>
                <a href="http://docs.yahoo.com/info/copyright/copyright.html">Copyright/IP Policy</a>
            </li>
            <li class="last">
                <a href="http://suggestions.yahoo.com/?prop=Mojito">Feedback</a>
            </li>
        </ul>
    </div><!--/#ft --> 
	</footer>
</body>
</html>